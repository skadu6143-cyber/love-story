<!DOCTYPE html>
<html>
<head>
    <title>Our Love Story ‚ù§Ô∏è</title>

    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
        (function(){
            emailjs.init("9_ZofyADQhh_p6Nvh");
        })();
    </script>

    <style>
        body {
            margin: 0;
            height: 100vh;
            background: linear-gradient(135deg, #5c0000, #b3003b);
            font-family: 'Dancing Script', cursive;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            color: white;
        }

        .box {
            background: rgba(255,255,255,0.12);
            backdrop-filter: blur(12px);
            padding: 40px;
            width: 550px;
            border-radius: 20px;
            text-align: center;
            position: relative;
            box-shadow: 0 0 40px rgba(0,0,0,0.6);
        }

        textarea {
            padding: 12px;
            width: 85%;
            margin-top: 15px;
            border-radius: 10px;
            border: none;
            outline: none;
            font-family: Arial;
        }

        button {
            padding: 12px 25px;
            margin-top: 20px;
            cursor: pointer;
            border-radius: 10px;
            border: none;
            font-size: 18px;
            transition: 0.3s;
        }

        #yes { background: #ffccd5; }
        #yes:hover { transform: scale(1.1); }

        #no {
            background: #333;
            color: white;
            position: absolute;
            transition: 0.3s ease;
        }

        /* Floating hearts */
        .heart {
            position: fixed;
            bottom: -10px;
            color: white;
            font-size: 15px;
            animation: floatUp 6s linear infinite;
            opacity: 0.7;
        }

        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 0.8; }
            100% { transform: translateY(-100vh); opacity: 0; }
        }
    </style>
</head>

<body>

<div class="box" id="mainBox">
    <h2 id="question"></h2>
    <div id="inputArea"></div>
    <p id="error" style="color:#ffdede;"></p>
</div>

<audio id="bgMusic" loop>
    <source src="music.mp3" type="audio/mpeg">
</audio>

<script>

const questions = [
    "When did we start dating? (DD/MM/YYYY)",
    "What is the nickname that I kept for you?",
    "Tell me the one spot I want you to kiss every time first of all?",
    "When I look at you a certain way‚Ä¶ what do you feel?",
    "What is the first thing you notice about me when we are close?",
    "Where do you love kissing me the most?",
    "When I pull you closer, what goes through your mind?",
    "What is something you‚Äôve always wanted to try with me?",
    "How do you feel when I kiss your neck?",
    "Describe me in 50-100 words.",
    "Babe, Will you be my Valentine? üíñ"
];

const correctDate = "27/03/2025";
const correctAnswers = ["bubu", "cheeks"];

let index = 0;
let responses = {};
let musicStarted = false;

const questionElement = document.getElementById("question");
const inputArea = document.getElementById("inputArea");
const errorText = document.getElementById("error");

function loadQuestion() {
    questionElement.innerText = questions[index];
    errorText.innerText = "";

    if (index === 9) {
        inputArea.innerHTML = `
            <textarea id="userInput" rows="4" placeholder="Write at least 50 words..."></textarea>
            <br>
            <button onclick="checkAnswer()">Submit</button>
        `;
    } 
    else if (index === 10) {
        inputArea.innerHTML = `
            <button id="yes" onclick="finalYes()">Yes üíï</button>
            <button id="no">No üò¢</button>
        `;
        const noBtn = document.getElementById("no");
        noBtn.addEventListener("mouseenter", function() {
            moveButton(noBtn);
        });
    } 
    else {
        inputArea.innerHTML = `
            <textarea id="userInput" rows="3" placeholder="Type your answer..."></textarea>
            <br>
            <button onclick="checkAnswer()">Submit</button>
        `;
    }
}

function moveButton(btn) {
    const box = document.getElementById("mainBox");
    const maxX = box.clientWidth - btn.offsetWidth;
    const maxY = box.clientHeight - btn.offsetHeight;

    btn.style.left = Math.random() * maxX + "px";
    btn.style.top = Math.random() * maxY + "px";
}

function checkAnswer() {

    if (!musicStarted) {
        document.getElementById("bgMusic").play();
        document.getElementById("bgMusic").volume = 0.4;
        musicStarted = true;
    }

    const userInputRaw = document.getElementById("userInput").value.trim();
    const userInput = userInputRaw.toLowerCase();

    if (index === 0) {
        const datePattern = /^\d{2}\/\d{2}\/\d{4}$/;
        if (!datePattern.test(userInputRaw)) {
            errorText.innerText = "Use format DD/MM/YYYY";
            return;
        }
        if (userInputRaw === correctDate) {
            responses[questions[index]] = userInputRaw;
            index++;
            loadQuestion();
        } else {
            errorText.innerText = "Wrong date.";
        }
    }

    else if (index === 1 || index === 2) {
        if (userInput === correctAnswers[index - 1]) {
            responses[questions[index]] = userInputRaw;
            index++;
            loadQuestion();
        } else {
            errorText.innerText = "Wrong answer.";
        }
    }

    else if (index === 9) {
        const wordCount = userInput.split(/\s+/).length;
        if (wordCount >= 50) {
            responses[questions[index]] = userInputRaw;
            index++;
            loadQuestion();
        } else {
            errorText.innerText = "Minimum 50 words required.";
        }
    }

    else {
        if (userInputRaw.length > 0) {
            responses[questions[index]] = userInputRaw;
            index++;
            loadQuestion();
        } else {
            errorText.innerText = "Don't be shy üòå";
        }
    }
}

function finalYes() {

    responses["Final Answer"] = "Yes";

    let formattedMessage = "";
    for (let key in responses) {
        formattedMessage += key + ":\n" + responses[key] + "\n\n";
    }

    emailjs.send("service_y8deipe", "template_fmb2iog", {
        message: formattedMessage,
        time: new Date().toLocaleString()
    });

    document.getElementById("mainBox").innerHTML = `
        <div style="text-align:center; padding-top:40px;">
            <h1 style="font-size:55px;">My Bubu‚ù§Ô∏è</h1>

            <img src="photo.jpg" 
                 style="width:260px; border-radius:20px; margin-bottom:25px; box-shadow:0 0 40px rgba(255,150,150,0.6);">

            <p style="font-size:24px; width:70%; margin:auto; line-height:1.6;">
                You are the calm to my chaos, the strength behind my smiles,
                and the safest place I know.
                With you, love feels deep, intense, and beautifully addictive.
                I choose you every single day, in every birth, in every universe.
            </p>
        </div>
    `;

    // Floating hearts
    setInterval(() => {
        const heart = document.createElement("div");
        heart.className = "heart";
        heart.innerHTML = "‚ô•";
        heart.style.left = Math.random() * 100 + "vw";
        heart.style.fontSize = (10 + Math.random() * 20) + "px";
        document.body.appendChild(heart);

        setTimeout(() => {
            heart.remove();
        }, 6000);
    }, 400);
}

loadQuestion();

</script>

</body>
</html>